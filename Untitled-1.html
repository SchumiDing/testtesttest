<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>testtesttest</title>
    <script src="https://cdn.bootcss.com/jquery/2.2.4/jquery.js"></script>
    <style>
        body{
            background-color:bisque;
        }
        .aa {
            width: 100%;
            height: 100%;
            canvas {
            width: 100%;
            height: 100%;
            display: block;
            }
        }
    </style>
</head>
<body>
<div class="aa">
    <canvas id="myCanvas" width="", height="",style="background:none;" ></canvas>
</div>    
<script>
    $(function() {
        //添加窗口尺寸改变响应监听
        $(window).resize(resizeCanvas);
        //页面加载后先设置一下canvas大小
        resizeCanvas();
    });
 
      //窗口尺寸改变响应（修改canvas大小）
    function resizeCanvas() {
        $("#myCanvas").attr("width", $(window).get(0).innerWidth);
        $("#myCanvas").attr("height", $(window).get(0).innerHeight);
    };
</script>
<script type="text/javascript">   
    var canvas = document.getElementById("myCanvas");
    var ctx = canvas.getContext("2d");
   
    var flag1=1,flag2=1,flag3=1;

    /*falg1=1~3 变量*/
    var x1=-50,y1=-173,len=200;
    var x2=50,y2=-68;
    var dx1=0,dy1=0.3;
    var dx2=0,dy2=0.3;
    var str1="zzzzzzzz";

    /*falg1=4~ 变量*/
    var loca=[];
    var x3=[];
    var y3=[];
    var num1=0,num2=0;
    var i=0;
    var dy3=10;
    

    ctx.fillStyle = '#FFFFFF';
    
        function draw()
        {   
            canvas.onmouseup=function(event){
                flag1++;
            }
            if(x1<-20&&y1<-20&&x2>canvas.width&&y2<-20&&flag1==2){
                flag1=3;
            }
            if(flag1==1){
                
                ctx.clearRect(0,0,canvas.width,canvas.height);
                /*first circle location*/
                if (x1>=(canvas.width-len)) {dx1=0;}
                if (y1>(-163)) { dy1=-0.3;}
                if (x1<=0) {dx1=0;}
                if (y1<=-183) { dy1=0.3;}
                x1+=dx1;y1+=dy1;

                /*second circle location*/
                if (x2>=(canvas.width-len)) {dx2=0;}
                if (y2>(-50)) { dy2=-0.1;}
                if (x2<=0) {dx2=0;}
                if (y2<=-75) { dy2=0.1;}
                x2+=dx2;y2+=dy2;

                ctx.fillStyle = 'rgba(205,85,85,0.3)';
                ctx.beginPath();
                ctx.arc(canvas.width/2+x1,canvas.height/2+y1,canvas.width/6,0,2*Math.PI);
                
                /*ctx.fillRect(canvas.width/2+x1,canvas.height/2+y1,len,len); */
                ctx.fill();
                ctx.fillStyle = 'rgba(150,40,40,0.3)';
                ctx.arc(canvas.width/2+x2,canvas.height/2+y2,canvas.width/4,0,2*Math.PI);
                ctx.fill();
                ctx.font="40px Arial";
                ctx.fillText("Happy birthday!",canvas.width/2+x1-100,canvas.height/2+y1);

            }if(flag1>=2){
                ctx.clearRect(0,0,canvas.width,canvas.height);
                /*circles out*/
                if(flag2==1){
                    dx1=(x1-canvas.width/2)/200;
                    dy1=(y1-canvas.height/2)/200;
                    dx2=(x2-canvas.width/2)/200;
                    dy2=(y2-canvas.height/2)/200;
                    flag2=2;
                }
                if(flag2==2){
                    dx1-=1;
                    dy1-=1;
                    dx2+=1;
                    dy2-=1;
                }
                x1+=dx1;y1+=dy1;
                x2+=dx2;y2+=dy2;
                ctx.fillStyle = 'rgba(205,85,85,0.3)';
                ctx.beginPath();
                ctx.font="40px Arial";
                ctx.fillText(str1,canvas.width/2-100,canvas.height/2-100);
                ctx.arc(canvas.width/2+x1,canvas.height/2+y1,canvas.width/6,0,2*Math.PI);
                /*ctx.fillRect(canvas.width/2+x1,canvas.height/2+y1,len,len); */
                ctx.fill();
                ctx.fillStyle = 'rgba(150,40,40,0.3)';
                ctx.arc(canvas.width/2+x2,canvas.height/2+y2,canvas.width/4,0,2*Math.PI);
                ctx.fill();
                ctx.font="40px Arial";
                ctx.fillText("Happy birthday!",canvas.width/2+x1-100,canvas.height/2+y1);
            }   
            if(flag1==3){
                ctx.beginPath();
                ctx.clearRect(0,0,canvas.width,canvas.height);
                ctx.font="40px Arial";
                ctx.fillText(str1,canvas.width/2-100,canvas.height/2-100);
            }  
            if(flag1>=4){
                ctx.clearRect(0,0,canvas.width,canvas.height);
                /*create all the random x of balls*/
                if(flag3==1){
                    
                    for(i=0;i<=1000;i++){
                        loca[i]=Math.random()*canvas.width;
                    }
                    
                    flag3=2;
                }
                var sum=num1;
                /*create 15 balls every circulation until there are enough balls*/
                if(x3.length<1000){
                    for(;num1<=sum+20;num1++){
                        x3[num1]=loca[num1];
                        y3[num1]=-40;
                    }
                }
                /*caculate movement of balls*/
                for(i=0;i<x3.length;i++){
                        var re=dy3+Math.random()*i+Math.random()*10;
                        if(re>=80)re=60+Math.random()*20;
                        y3[i]+=re;
                }
                /*draw balls*/
                for(i=0;i<x3.length;i++){
                    ctx.fillStyle = 'rgba(150,40,40,0.2)';
                    ctx.beginPath();
                    ctx.arc(x3[i],y3[i],canvas.width/20,0,2*Math.PI);
                    ctx.fill();
                }
            }            
        }


    function main() {
        draw();  
        
        requestAnimationFrame(main);
    } 
    main();
</script>
 
</body>
   